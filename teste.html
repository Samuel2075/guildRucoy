<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detectar Texto em uma Imagem usando tesseract.js</title>
  <script src="https://cdn.rawgit.com/naptha/tesseract.js/1.0.10/dist/tesseract.min.js"></script>
</head>
<body>

<input type="file" id="inputImage" accept="image/*">
<button onclick="detectText()">Detectar Texto</button>

<script>
  async function detectText() {
    const inputImage = document.getElementById('inputImage');
    const file = inputImage.files[0];

    if (file) {
      const reader = new FileReader();

      reader.onload = async function(e) {
        const img = new Image();
        img.src = e.target.result;

        img.onload = async function() {
          try {
            const result = await Tesseract.recognize(
              img,
              'eng', // idioma (pode ser necessário ajustar dependendo do idioma do texto na imagem)
              { logger: (info) => console.log(info) } // opções, incluindo logger para depuração
            );

            // Exibir o texto detectado
            alert('Texto detectado: ' + result.text);
          } catch (error) {
            console.error('Erro durante o reconhecimento:', error);
            alert('Ocorreu um erro durante o processamento.');
          }
        };
      };

      reader.readAsDataURL(file);
    } else {
      alert('Selecione uma imagem.');
    }
  }
</script>

</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detectar Texto em uma Imagem usando tesseract.js</title>
  <script src="https://cdn.rawgit.com/naptha/tesseract.js/1.0.10/dist/tesseract.min.js"></script>
</head>
<body>

<input type="file" id="inputImage" accept="image/*">
<button onclick="detectText()">Detectar Texto</button>

<script>
  async function detectText() {
    const inputImage = document.getElementById('inputImage');
    const file = inputImage.files[0];

    if (file) {
      const reader = new FileReader();

      reader.onload = async function(e) {
        const img = new Image();
        img.src = e.target.result;

        img.onload = async function() {
          try {
            const result = await Tesseract.recognize(
              img,
              'por',
              {
                logger: (info) => console.log(info), // opções, incluindo logger para depuração
                tessedit_char_whitelist: '0123456789', // Whitelist para dígitos (ajuste conforme necessário)
                threshold: 150 // Limiar de binarização (ajuste conforme necessário)
              }
            );

            // Exibir o texto detectado
            alert('Texto detectado: ' + result.text);
          } catch (error) {
            console.error('Erro durante o reconhecimento:', error);
            alert('Ocorreu um erro durante o processamento.');
          }
        };
      };

      reader.readAsDataURL(file);
    } else {
      alert('Selecione uma imagem.');
    }
  }
</script>

</body>
</html>
